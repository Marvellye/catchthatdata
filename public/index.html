<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Catch That Data</title>
      <!-- Bootstrap 5 CSS -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
      <style>
         @font-face {
         font-family: 'SmallFont';
         src: url('./fonts/BRSonoma-Regular-BF654c45266c042.otf') format('opentype');
         }
         @font-face {
         font-family: 'BigFont';
         src: url('./fonts/BRSonoma-Black-BF654c4525506bf.otf') format('opentype');
         }
         body {
         font-family: 'SmallFont', sans-serif;
         background-color: #000;
         color: #fff;
         }
         .header {
         position: fixed;
         top: 0;
         width: 100%;
         height: 50px;
         padding: 15px;
         background: rgba(0, 0, 0, 0.5);
         backdrop-filter: blur(10px);
         box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
         z-index: 1000;
         text-align: center;
         font-family: 'BigFont', sans-serif;
         }
         .header h1 {
         font-size: 1.5rem;
         color: #fff;
         }
         .header span {
         color: crimson;
         }
         .container {
         padding-top: 30px;
         }
         .card {
         background-color: #151515;
         padding: 20px;
         border-radius: 10px;
         box-shadow: 0 10px 30px rgba(255, 255, 255, 0.1);
         animation: fadeIn 1.5s ease-in-out;
         }
         .card h3,
         .card p {
         color: #fff;
         }
         .keywords .keyword {
         background-color: #333;
         padding: 5px 15px;
         border-radius: 5px;
         font-size: 0.9rem;
         transition: all 0.3s ease;
         }
         .keyword:hover {
         background-color: #444;
         transform: scale(1.05);
         }
         .install code {
         background-color: #363636;
         padding: 10px;
         display: block;
         border-radius: 5px;
         margin-bottom: 10px;
         color: #b0b0b0;
         overflow-x: auto;
         text-wrap: nowrap;
         height: auto;
         text-width: 50px;
         }
         .get {
         margin-bottom: 20px;
         background-color: #fff;
         color: #000;
         }
         .hide {
         display: none;
         }
         #circle {
         position: fixed;
         bottom: -100px;
         left: 50%;
         width: 10px;
         height: 10px;
         background-color: black;
         border-radius: 50%;
         transform: translateX(-50%);
         z-index: 10;
         }
         @keyframes fadeIn {
         from {
         opacity: 0;
         transform: translateY(10px);
         }
         to {
         opacity: 1;
         transform: translateY(0);
         }
         }
         .comments {
         color: green;
         }
         .add-px {
         margin-left: 25px;
         }
      </style>
      <style>
        .skeleton-loader {
            background-color: #fff;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }

        .skeleton-loader::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.6) 50%, rgba(255, 255, 255, 0) 100%);
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }

        .skeleton-line {
            height: 20px;
            margin-bottom: 10px;
            background-color: rgba(0, 0, 0, 0.1);
            border-radius: 4px;
        }

        .skeleton-line.short {
            width: 40%;
        }

        .skeleton-line.medium {
            width: 60%;
        }

        .skeleton-line.long {
            width: 100%;
        }
    </style>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
   </head>
   <body>
      <header class="header">
         <h1>Catch That Data<span>™</span></h1>
      </header>
      <main class="container">
         <div id="app" class="card mx-auto my-5 p-4" style="max-width: 600px;">
            <div class="card-title d-inline-flex">
               <h3>CatchThatData</h3>
               <badge class="badge">v1</badge>
            </div>
            <p>This is a Simple CDN that can help devs (or Hackers) get your device information. To use it, get the CDN and
               include it in the head tag of your code and see the magic. <br /> Oh yes! I have your location as well :)
            </p>
            <div class="app-box install mb-3">
               <div id="response" class="data-box">
                                  <div class="skeleton-loader p-4">
                    <div class="skeleton-line long"></div>
                    <div class="skeleton-line medium"></div>
                    <div class="skeleton-line short"></div>
                    <div class="skeleton-line long"></div>
                </div>
               </div>
            </div>
            <div class="keywords d-flex flex-wrap gap-2 mb-3">
               <div class="keyword">IP address</div>
               <div class="keyword">battery life</div>
               <div class="keyword">status</div>
               <div class="keyword">width</div>
               <div class="keyword">height</div>
               <div class="keyword">type</div>
               <div class="keyword">timezone</div>
               <div class="keyword">location</div>
            </div>
            <button class="btn get w-100" onclick="getVideo()">Get Install Code</button>
         </div>
         <!-- Second app section -->
         <div id="app2" class="card mx-auto my-5 p-4" style="max-width: 600px; display: none;">
            <div class="card-title d-inline-flex">
               <h3>CatchThatData</h3>
               <badge class="badge">v1</badge>
            </div>
            <p>This is for educational purposes only!!<br /> User Discretion is advised ⚠️</p>
            <div class="install  code mt-3">
               <code>
               <i class="comments">&lt;!-- Include the remote script --&gt; </i>
               <br/>
               <br/>
               &lt;script src="https://api.marvelly.com.ng/catchthatdata/app.min.js"&gt;&lt;/script&gt;
               <br/>
               </code>
               <br />
               <code>
               <i class="comments">&lt;!-- Initialize the client data collection --&gt;</i>
               <br/>
               <br/>
               &lt;script&gt;
               <br/>
               <span class="add-px"></span> window.clientInfoTracker({
               <br/>
               <span class="add-px"></span><span class="add-px"></span> // Developer's API to receive the data
               <br/>
               <span class="add-px"></span><span class="add-px"></span>endpoint: 'https://example.com/client-data', 
               <br/>
               <span class="add-px"></span>  });
               <br/>
               &lt;/script&gt;
               </code>
            </div>
            <button class="btn get w-100" onclick="getVideoo()">‹ Go Back</button>
         </div>
         <div id="circle"></div>
         <div id="circle2"></div>
      </main>
      <footer class="footer text-center py-3">
         <p>&copy; 2024 CatchThatData - 100daysofMiva <br/> Marvelly</p>
      </footer>
      <script>
         function getVideo() {
           anime({
             targets: '#circle',
             width: ['10px', '3000px'],
             height: ['10px', '3000px'],
             duration: 500,
             easing: 'easeInOutQuad',
             complete: function () {
               document.getElementById('app').style.display = 'none';
               document.getElementById('app2').style.display = 'block';
               anime({
                 targets: '#circle',
                 width: ['3000px', '10px'],
                 height: ['3000px', '10px'],
                 duration: 500,
                 easing: 'easeInOutQuad',
                 complete: function () {
                   document.getElementById('circle').style.display = 'none';
                 }
               });
             }
           });
         };
         function getVideoo() {
           anime({
             targets: '#circle2',
             width: ['10px', '3000px'],
             height: ['10px', '3000px'],
             duration: 500,
             easing: 'easeInOutQuad',
             complete: function () {
               document.getElementById('app2').style.display = 'none';
               document.getElementById('app').style.display = 'block';
               anime({
                 targets: '#circle2',
                 width: ['3000px', '10px'],
                 height: ['3000px', '10px'],
                 duration: 500,
                 easing: 'easeInOutQuad',
                 complete: function () {
                   document.getElementById('circle2').style.display = 'none';
                 }
               });
             }
           });
         };
      </script>
      <script>
         // Get client IP (via API)
         const getIp = async () => {
             try {
                 const response = await fetch('https://catchthatdata.onrender.com/ip?format=json');
                 if (!response.ok) {
                     throw new Error(`HTTP error! status: ${response.status}`);
                 }
                 const data = await response.json();
                 return data.ip;
             } catch (error) {
                 console.error('Failed to get IP:', error);
                 return null; // or a default IP value
             }
         };
         
         // Get battery information
         const getBatteryInfo = async () => {
             if (navigator.getBattery) {
                 return navigator.getBattery().then((battery) => {
                     return {
                         batteryPercentage: battery.level * 100,
                         batteryStatus: battery.charging ? 'Charging' : 'Discharging',
                     };
                 });
             } else {
                 return {
                     batteryPercentage: 'Unknown',
                     batteryStatus: 'Unknown',
                 };
             }
         };
         
         // Get device screen size
         const getScreenSize = () => {
             return {
                 screenWidth: screen.width,
                 screenHeight: screen.height,
             };
         };
         
         // Get device type, OS, and browser from UserAgent
         const getDeviceType = () => {
             const userAgent = navigator.userAgent;
             return {
                 device: /Mobi|Android/i.test(userAgent) ? 'Mobile' : 'Desktop',
                 os: navigator.platform,
                 browser: navigator.userAgent,
             };
         };
         
         // Get client date/time
         const getClientDateTime = () => {
             return new Date();
         };
         
         // Update the DOM with the collected data
         const updateResponseDOM = (data) => {
             const responseDiv = document.getElementById('response');
             responseDiv.innerHTML = `
                 <h3>Collected Data:</h3>
                 <ul>
                     <li><strong>IP:</strong> ${data.ip}</li>
                     <li><strong>Battery Percentage:</strong> ${data.batteryPercentage}%</li>
                     <li><strong>Battery Status:</strong> ${data.batteryStatus}</li>
                     <li><strong>Screen Width:</strong> ${data.screenWidth}px</li>
                     <li><strong>Screen Height:</strong> ${data.screenHeight}px</li>
                     <li><strong>Device Type:</strong> ${data.deviceType}</li>
                     <li><strong>OS:</strong> ${data.os}</li>
                     <li><strong>Browser:</strong> ${data.browser}</li>
                     <li><strong>Date/Time:</strong> ${data.dateTime}</li>
                 </ul>
             `;
         };
         
         // Send data to server
         const sendData = async (data) => {
             fetch('https://catchthatdata.onrender.com/client-info', {
                 method: 'POST',
                 headers: { 'Content-Type': 'application/json' },
                 body: JSON.stringify(data),
             })
                 .then((response) => response.json())
                 .then((responseData) => {
                     console.log('Server response:', responseData);
                     // Optionally update DOM with server response message
                    /*const responseDiv = document.getElementById('response');
                    responseDiv.innerHTML += `
                         <h4>Response from Server:</h4>
                         <p>${responseData.message}</p>
                     `;*/
                 })
                 .catch((error) => {
                     console.error('Error while sending data:', error);
                 });
         };
         
         // Gather data and update the DOM
         const gatherAndSendData = async () => {
             const ip = await getIp();
             const batteryInfo = await getBatteryInfo();
             const screenSize = getScreenSize();
             const deviceType = getDeviceType();
             const dateTime = getClientDateTime();
         
             const data = {
                 ip,
                 batteryPercentage: batteryInfo.batteryPercentage,
                 batteryStatus: batteryInfo.batteryStatus,
                 screenWidth: screenSize.screenWidth,
                 screenHeight: screenSize.screenHeight,
                 deviceType: deviceType.device,
                 os: deviceType.os,
                 browser: deviceType.browser,
                 dateTime: dateTime.toLocaleString(),
             };
         
             // Update the DOM immediately with the gathered data
             updateResponseDOM(data);
         
             // Send the data to the server
             sendData(data);
         };
         
         gatherAndSendData();
      </script>
      <!-- Bootstrap 5 JS -->
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
   </body>
</html>
